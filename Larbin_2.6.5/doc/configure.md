#larbin.conf详细配置

以下使用的中文名词全部对应于larbin-cn.conf文件中的注释名词。
配置文件中有3种配置方式，一种为赋值类的，通常是一个字段后跟一个值。一种是开关类的，当该字段被注释时为关掉该开关，当该字段不被注释时为打开该开关。还有一种是块设定类的，这类设置有一个起始字段，起始字段后面紧跟需要设置的内容，这是一段不定长的数据，之后有一个终止字段意为该块设定类结束。

##配置文件结构

larbin.conf主要分为以下部分：

* [身份和基本配置](#身份和基本配置)
* [Larbin的输入和输出设置](#Larbin的输入和输出设置)
* [Larbin的各项性能参数设置](#Larbin的各项性能参数设置)
* [功能设置](#功能设置)
* [搜索设置](#搜索设置)

###身份和基本配置

* __From__ 字段，该字段用于配置使用者的电子邮箱，这会让被爬取的网站方便联系爬虫使用者。

* __UserAgent__ 字段，该字段将直接包含于HTTP协议头中，这个字段是目标站点判断访问软件的版本所使用的。如果需要伪装成浏览器去爬取（部分网站会对爬虫进行一些屏蔽），就需要修改该字段为某个版本的浏览器的UserAgent。


###Larbin的输入和输出设置

* __outputMode__ 字段，该字段用于设置larbin的输出模式，不同的数字代表不同的输出模式。目前版本中的输出模式有4种：1-简单保存模式，所以爬取的页面统一编号存储；2-镜像保存模式，所有页面均以其在目标站点上的路径保存在本地，可视为将目标页面镜像到本地。

* __httpPort__ 字段，该字段用于设置webserver的端口，这个端口就是浏览器中访问larbin所使用的端口。如果该端口设置为0，意为不启用webserver。

* __inputPort__ 字段，在使用浏览器为larbin添加需要爬取的URL时，需要通过该端口进行访问。

* __printStats__ 字段，这是一个功能开关，当该开关打开时，终端会定期输出larbin的状态信息。

* __fetchInfo__ 字段，这是一个功能开关，当该开关打开时，终端会输出详细的爬取信息，其中包括larbin尝试的每一个URL已经该URL是否爬取成功，如果没有成功会附上相应的错误类型。

* __histogram__ 字段，这是一个功能开关，当该开关打开时，访问larbin的webserver时会看到时序的动态图表。

* __canReload__ 字段，这是一个功能开关，当该开关打开时，larbin具有reload的能力，在爬取时异常中断后，重新执行larbin时加上--reload参数可以使larbin从上次退出的状态继续进行。

* __debug__字段，这是一个功能开关，当该开关打开时，larbin会在终端中输出一些debug信息。

###Larbin的各项性能参数设置

* __lockSite__ 字段，这是一个功能开关，当该开关打开时，larbin处于“锁站点”的状态，larbin只会在种子URL所提供的站点中进行爬取，不会访问其他站点的内容。

* __pagesConnexions__ 字段，该字段用于设置并行连接访问的数目，这个数目需要依据目前的网络状况进行调整，通常越大的数字需要越快的网速。

* __dnsConnexions__ 字段，该字段用于设置并行DNS请求的数目，这个数目通常不需要设置太大。如果爬取的环境中有大量的新域名出现，需要更快的域名解析，可以适当增加该数值。

* __depthInSite__ 字段，该字段用于设置爬取的深度，这个深度的含义随后一个depthBySite字段的设定而改变。

* __depthBySite__ 字段，这是一个功能开关，当该开关打开时，depthInSite的含义为每一个站点的最大爬取深度。当该开关关闭时，depthInSite的含义为从种子URL出发最大的深度。

###功能设置

* __limitTime__ 字段，该字段用于设置larbin的爬取时间，数字以分钟为单位。如果设置为0，则意为不设置时间限制。

* __limitPage__ 字段，该字段用于设置larbin爬取的页面数，当爬取页面超过该数值时停止爬取。如果设置为0，则意为不设置爬取页面数限制。

* __highLevelWebserver__ 字段，这是一个功能开关，当该开关打开时，意为启用“高阶webserver”：当larbin停止爬取后，webserver依然会运行。开启该功能后，可以在larbin停止工作后也能通过浏览器去获得本次爬取的各个进度。

* __useCookies__ 字段，这是一个功能开关，当该开关打开时，larbin将启用Cookies的功能，larbin会保存产生的Cookies用于之后的页面爬取。

* __getCGI__ 字段，这是一个功能开关，当该开关打开时，larbin会抽取包含CGI的URL。

###搜索设置

* __startUrl__ 字段，该字段用于设置larbin开始爬取的页面的URL。这个字段是可以设置多个以达到设置多个其实页面的目的的。

* __punycode__ 字段，这是一个功能开关，当该开关打开时，larbin会解析非英文域名（例如中文域名：http://哈尔滨工业大学。中国）。

* __ignoreRobots__ 字段，这是一个功能开关，当该开关打开时，larbin的爬取行动将不遵守robots.txt协议。

* __pageNoDuplicate__ 字段，这是一个功能开关，当该开关打开时，larbin会对每一个提取的页面的内容进行哈希，防止爬取到重复的页面内容。这个功能十分消耗性能，如果没有特殊要求，一般不打开。

* __getImage__ 字段，这是一个功能开关，当该开关打开时，larbin会爬取页面中的图片。

* __anyType__ 字段，这是一个功能开关，当该开关打开时，larbin会爬取存在于页面中的任何类型的文件。

* __specificSearch__ 字段，当该开关打开时，下面的specificSet字段将变得有意义，并且larbin将进入specific search工作模式，该模式下，larbin只会提取specificSet字段中设定的文件类型。

* __specificSet__ 字段，这是一个块设置类，该字段必须在specificSearch功能开关打开后才会生效。在该字段后紧跟的是要设置的数据，数据以两个字段为一组：第一个字段为一个字符串，左右需带双引号，该字段表示specific search模式下提取的文件的类型（http协议头中的信息），第二个字段是对应的文件类型的后缀名。最后，在填写完若干条数据后，需要以“end end”作为结尾（没有引号）。例如：
```
specificSet
"audio/mpge" .mps
"image/jpeg" .jpg
end end
```

* __limitToDomain__ 字段，这是一个块设置类，该字段后紧跟定级域名（如：.com .cn .net）。最后在填写若干条域名后，以“end”作为结尾（没有引号）。这样，larbin将只会在这些定级域名中进行爬取。例如：
```
limitToDomain
.com
.cn
.net
end
```

* __forbiddenExtensions__ 字段，这是一个块设置类，该字段后紧跟一些文件的后缀名（如：.tar .txt .pdf）。最后在填写若干条文件后缀名之后以“end”作为结尾（没有引号）。这样larbin将不会抽取这些后缀名的文件。例如：
```
forbiddenExtensions
.tar .txt .pdf
end
```
